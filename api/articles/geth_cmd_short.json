{"title":"Geth 控制台使用及 Web3.js 使用实战","slug":"geth_cmd_short","date":"2018-02-25T05:02:22.000Z","updated":"2022-10-19T14:40:00.251Z","comments":true,"path":"api/articles/geth_cmd_short.json","realPath":"/2018/geth_cmd_short/geth-cmd-short/","excerpt":null,"covers":null,"cover":null,"content":"<p>在开发以太坊去中心化应用，免不了和以太坊进行交互，那就离不开Web3。<br>Geth 控制台（REPL）实现了所有的<a href=\"http://web3js.readthedocs.io/en/1.0/index.html\">web3 API</a>及<a href=\"https://github.com/ethereum/go-ethereum/wiki/Management-APIs#admin\">Admin API</a>，<br>使用好 Geth 就是必修课。结合<a href=\"/posts/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%E5%8C%BA%E5%9D%97%E9%93%BE/%E4%BB%A5%E5%A4%AA%E5%9D%8A/geth/2018-02-24-geth_cmd_options.html\">Geth命令用法</a>阅读效果更佳。</p>\n<h2 id=\"写在前面\"><a href=\"#写在前面\" class=\"headerlink\" title=\"写在前面\"></a>写在前面</h2><p>阅读本文之前，你需要对以太坊（区块链）有初步的了解，如果你不知道以太坊是什么，请先阅读<a href=\"/posts/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%E5%8C%BA%E5%9D%97%E9%93%BE/%E4%BB%A5%E5%A4%AA%E5%9D%8A/geth/2018-02-25-geth_cmd_short.html\">以太坊是什么</a>。<br>如果你在我的小专栏之外的地方阅读到本文，你可能只能阅读本文的节选，阅读完整全文请订阅小专栏<a href=\"/categories/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%E5%8C%BA%E5%9D%97%E9%93%BE/\">区块链技术</a></p>\n<h2 id=\"geth控制带初探-启动、退出\"><a href=\"#geth控制带初探-启动、退出\" class=\"headerlink\" title=\"geth控制带初探-启动、退出\"></a>geth控制带初探-启动、退出</h2><p>安装参考<a href=\"/posts/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%E5%8C%BA%E5%9D%97%E9%93%BE/%E4%BB%A5%E5%A4%AA%E5%9D%8A/2018-02-24-init-env.html\">智能合约开发环境搭建</a><br>最简单启动方式如下：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ geth console</span><br></pre></td></tr></table></figure>\n\n<p>geth控制台启动成功之后，可以看到&gt;提示符。<br>退出输入exit</p>\n<h2 id=\"geth日志控制\"><a href=\"#geth日志控制\" class=\"headerlink\" title=\"geth日志控制\"></a>geth日志控制</h2><h3 id=\"重定向日志到文件\"><a href=\"#重定向日志到文件\" class=\"headerlink\" title=\"重定向日志到文件\"></a>重定向日志到文件</h3><p>使用geth console启动时，会在当前交互界面下时不时出现日志。<br>可以使用以下方式把日志输出到文件。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ geth console 2&gt;&gt;geth.log</span><br></pre></td></tr></table></figure>\n\n<p>可以新开一个命令行终端输入以下命令查看日志:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ tail -f geth.log</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"重定向另一个终端\"><a href=\"#重定向另一个终端\" class=\"headerlink\" title=\"重定向另一个终端\"></a>重定向另一个终端</h3><p>也可以把日志重定向到另一个终端，先在想要看日志的终端输入</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ tty</span><br></pre></td></tr></table></figure>\n\n<p>就可以获取到终端编号，如: &#x2F;dev&#x2F;ttys003<br>然后另一个终端使用:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ geth console 2&gt;&gt; /dev/ttys003</span><br></pre></td></tr></table></figure>\n\n<p>启动geth,这时日志就输出到另一个终端。<br>如果不想看到日志还可以重定向到空终端：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ geth console 2&gt;&gt; /dev/null</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"日志级别控制\"><a href=\"#日志级别控制\" class=\"headerlink\" title=\"日志级别控制\"></a>日志级别控制</h3><p>使用__–verbosity__ 可以控制日志级别，如不想看到日志还可以使用：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ geth --verbosity 0 console</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"启动一个开发模式测试节点\"><a href=\"#启动一个开发模式测试节点\" class=\"headerlink\" title=\"启动一个开发模式测试节点\"></a>启动一个开发模式测试节点</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">geth --datadir /home/xxx/testNet --dev console</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>技巧：如果我们经常使用一个方式来启动，可以把命令存为一个bash脚本。<br><del>&#x2F;bin你可以放一些常用的脚本，并把</del>&#x2F;bin加入到环境变量PATH里。</p>\n</blockquote>\n<h2 id=\"连接geth节点\"><a href=\"#连接geth节点\" class=\"headerlink\" title=\"连接geth节点\"></a>连接geth节点</h2><p>另外一个启动geth的方法是连接到一个geth节点：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ geth attach ipc:/some/custom/path</span><br><span class=\"line\">$ geth attach http://191.168.1.1:8545</span><br><span class=\"line\">$ geth attach ws://191.168.1.1:8546</span><br></pre></td></tr></table></figure>\n\n<p>如连接刚刚打开的开发模式节点使用：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">geth attach ipc:testNet/geth.ipc</span><br></pre></td></tr></table></figure>\n\n<p>更多内容请前往区块链技术小专栏查看<a href=\"/categories/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%E5%8C%BA%E5%9D%97%E9%93%BE/\">全部链接</a>。</p>\n<p>a</p>\n","more":"<p>在开发以太坊去中心化应用，免不了和以太坊进行交互，那就离不开Web3。<br>Geth 控制台（REPL）实现了所有的<a href=\"http://web3js.readthedocs.io/en/1.0/index.html\">web3 API</a>及<a href=\"https://github.com/ethereum/go-ethereum/wiki/Management-APIs#admin\">Admin API</a>，<br>使用好 Geth 就是必修课。结合<a href=\"/posts/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%E5%8C%BA%E5%9D%97%E9%93%BE/%E4%BB%A5%E5%A4%AA%E5%9D%8A/geth/2018-02-24-geth_cmd_options.html\">Geth命令用法</a>阅读效果更佳。</p>\n<h2 id=\"写在前面\"><a href=\"#写在前面\" class=\"headerlink\" title=\"写在前面\"></a>写在前面</h2><p>阅读本文之前，你需要对以太坊（区块链）有初步的了解，如果你不知道以太坊是什么，请先阅读<a href=\"/posts/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%E5%8C%BA%E5%9D%97%E9%93%BE/%E4%BB%A5%E5%A4%AA%E5%9D%8A/geth/2018-02-25-geth_cmd_short.html\">以太坊是什么</a>。<br>如果你在我的小专栏之外的地方阅读到本文，你可能只能阅读本文的节选，阅读完整全文请订阅小专栏<a href=\"/categories/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%E5%8C%BA%E5%9D%97%E9%93%BE/\">区块链技术</a></p>\n<h2 id=\"geth控制带初探-启动、退出\"><a href=\"#geth控制带初探-启动、退出\" class=\"headerlink\" title=\"geth控制带初探-启动、退出\"></a>geth控制带初探-启动、退出</h2><p>安装参考<a href=\"/posts/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%E5%8C%BA%E5%9D%97%E9%93%BE/%E4%BB%A5%E5%A4%AA%E5%9D%8A/2018-02-24-init-env.html\">智能合约开发环境搭建</a><br>最简单启动方式如下：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ geth console</span><br></pre></td></tr></table></figure>\n\n<p>geth控制台启动成功之后，可以看到&gt;提示符。<br>退出输入exit</p>\n<h2 id=\"geth日志控制\"><a href=\"#geth日志控制\" class=\"headerlink\" title=\"geth日志控制\"></a>geth日志控制</h2><h3 id=\"重定向日志到文件\"><a href=\"#重定向日志到文件\" class=\"headerlink\" title=\"重定向日志到文件\"></a>重定向日志到文件</h3><p>使用geth console启动时，会在当前交互界面下时不时出现日志。<br>可以使用以下方式把日志输出到文件。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ geth console 2&gt;&gt;geth.log</span><br></pre></td></tr></table></figure>\n\n<p>可以新开一个命令行终端输入以下命令查看日志:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ tail -f geth.log</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"重定向另一个终端\"><a href=\"#重定向另一个终端\" class=\"headerlink\" title=\"重定向另一个终端\"></a>重定向另一个终端</h3><p>也可以把日志重定向到另一个终端，先在想要看日志的终端输入</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ tty</span><br></pre></td></tr></table></figure>\n\n<p>就可以获取到终端编号，如: &#x2F;dev&#x2F;ttys003<br>然后另一个终端使用:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ geth console 2&gt;&gt; /dev/ttys003</span><br></pre></td></tr></table></figure>\n\n<p>启动geth,这时日志就输出到另一个终端。<br>如果不想看到日志还可以重定向到空终端：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ geth console 2&gt;&gt; /dev/null</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"日志级别控制\"><a href=\"#日志级别控制\" class=\"headerlink\" title=\"日志级别控制\"></a>日志级别控制</h3><p>使用__–verbosity__ 可以控制日志级别，如不想看到日志还可以使用：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ geth --verbosity 0 console</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"启动一个开发模式测试节点\"><a href=\"#启动一个开发模式测试节点\" class=\"headerlink\" title=\"启动一个开发模式测试节点\"></a>启动一个开发模式测试节点</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">geth --datadir /home/xxx/testNet --dev console</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>技巧：如果我们经常使用一个方式来启动，可以把命令存为一个bash脚本。<br><del>&#x2F;bin你可以放一些常用的脚本，并把</del>&#x2F;bin加入到环境变量PATH里。</p>\n</blockquote>\n<h2 id=\"连接geth节点\"><a href=\"#连接geth节点\" class=\"headerlink\" title=\"连接geth节点\"></a>连接geth节点</h2><p>另外一个启动geth的方法是连接到一个geth节点：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ geth attach ipc:/some/custom/path</span><br><span class=\"line\">$ geth attach http://191.168.1.1:8545</span><br><span class=\"line\">$ geth attach ws://191.168.1.1:8546</span><br></pre></td></tr></table></figure>\n\n<p>如连接刚刚打开的开发模式节点使用：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">geth attach ipc:testNet/geth.ipc</span><br></pre></td></tr></table></figure>\n\n<p>更多内容请前往区块链技术小专栏查看<a href=\"/categories/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%E5%8C%BA%E5%9D%97%E9%93%BE/\">全部链接</a>。</p>\n<p>a</p>\n","categories":[{"name":"学习记录","path":"api/categories/学习记录.json"},{"name":"区块链","path":"api/categories/区块链.json"},{"name":"以太坊","path":"api/categories/以太坊.json"}],"tags":[{"name":"以太坊","path":"api/tags/以太坊.json"}]}