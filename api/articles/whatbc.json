{"title":"区块链记账原理","slug":"whatbc","date":"2018-02-08T07:22:53.000Z","updated":"2022-10-19T14:40:00.274Z","comments":true,"path":"api/articles/whatbc.json","realPath":"/2018/whatbc/index/","excerpt":null,"covers":null,"cover":null,"content":"<p>区块链(1.0)是一个基于密码学安全的分布式账本，是一个方便验证，不可篡改的账本。<br>通常认为与智能合约相结合的区块链为区块链2.0, 如以太坊是典型的区块链2.0<br>很多人只了解过比特币，不知道区块链，比特币实际是一个使用了区块链技术的应用，只是比特币当前太热，把区块链技术的光芒给掩盖了。区块链才是未来，期望各位开发人员少关心币价，多关心技术。<br>本文将讲解区块链1.0技术是如何实现的。</p>\n<h2 id=\"哈希函数\"><a href=\"#哈希函数\" class=\"headerlink\" title=\"哈希函数\"></a>哈希函数</h2><p>在讲区块链记账之前，先说明一下哈希函数。<br>哈希函数：Hash(原始信息) &#x3D; 摘要信息<br>原始信息可以是任意的信息, hash之后会得到一个简短的摘要信息</p>\n<p>哈希函数有几个特点:</p>\n<ul>\n<li>同样的原始信息用同一个哈希函数总能得到相同的摘要信息</li>\n<li>原始信息任何微小的变化都会哈希出面目全非的摘要信息</li>\n<li>从摘要信息无法逆向推算出原始信息</li>\n</ul>\n<p>举例说明：<br>Hash(张三借给李四100万，利息1%，1年后还本息 …..) &#x3D; AC4635D34DEF<br>账本上记录了AC4635D34DEF这样一条记录。</p>\n<p>可以看出哈希函数有4个作用：</p>\n<ul>\n<li>简化信息<br>很好理解，哈希后的信息变短了。</li>\n<li>标识信息<br>可以使用AC4635D34DEF来标识原始信息，摘要信息也称为原始信息的id。</li>\n<li>隐匿信息<br>账本是AC4635D34DEF这样一条记录，原始信息被隐匿。</li>\n<li>验证信息<br>假如李四在还款时欺骗说，张三只借给李四10万，双方可以用AC4635D34DEF来验证原始信息</li>\n</ul>\n<p>哈希函数的这4个作用在区块链技术里有广泛的运用。<br>（哈希函数是一组函数或算法，以后会发文章专门介绍哈希）</p>\n<h2 id=\"区块链记账方法\"><a href=\"#区块链记账方法\" class=\"headerlink\" title=\"区块链记账方法\"></a>区块链记账方法</h2><p>假设有一个账页序号为0的账页交易记录如下:</p>\n<table>\n<thead>\n<tr>\n<th>账号</th>\n<th>入账</th>\n<th>出账</th>\n<th>余额</th>\n<th>备注说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>王二</td>\n<td>100</td>\n<td></td>\n<td>190</td>\n<td>收到xxx货款</td>\n</tr>\n<tr>\n<td>张三</td>\n<td></td>\n<td>100</td>\n<td>30</td>\n<td>xxxx</td>\n</tr>\n<tr>\n<td>李四</td>\n<td>120</td>\n<td>90</td>\n<td>170</td>\n<td>xxxx</td>\n</tr>\n</tbody></table>\n<p>记账时间为：2017-10-22 10:22:02</p>\n<p>区块链在记账是会把账页信息（包含序号、记账时间、交易记录）作为原始信息进行Hash, 得到一个Hash值，如：787635ACD, 用函数表示为：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Hash(序号0、记账时间、交易记录) = 787635ACD</span><br></pre></td></tr></table></figure>\n\n<p>账页信息和Hash值组合在一起就构成了第一个区块。</p>\n<blockquote>\n<p>比特币系统里约10分钟记一次账，即每个区块生成时间大概间隔10分钟</p>\n</blockquote>\n<p>在记第2个账页的时候，会把上一个块的Hash值和当前的账页信息一起作为原始信息进行Hash,即：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Hash(上一个Hash值、序号1、记账时间、交易记录) = 456635BCD</span><br></pre></td></tr></table></figure>\n\n<p>这样第2个区块不仅包含了本账页信息，还间接的包含了第一个区块的信息。依次按照此方法继续记账，则最新的区块总是间接包含了所有之前的账页信息。</p>\n<p>所有这些区块组合起来就形成了区块链，这样的区块链就构成了一个便于验证（只要验证最后一个区块的Hash值就相当于验证了整个账本），不可更改（任何一个交易信息的更改，会让所有之后的区块的Hash值发生变化，这样在验证时就无法通过）的总账本。</p>\n<p>记账有成本，想了解节点为什么要记账，请看这篇：<a href=\"\">在比特币如何挖矿-工作量证明</a></p>\n","more":"<p>区块链(1.0)是一个基于密码学安全的分布式账本，是一个方便验证，不可篡改的账本。<br>通常认为与智能合约相结合的区块链为区块链2.0, 如以太坊是典型的区块链2.0<br>很多人只了解过比特币，不知道区块链，比特币实际是一个使用了区块链技术的应用，只是比特币当前太热，把区块链技术的光芒给掩盖了。区块链才是未来，期望各位开发人员少关心币价，多关心技术。<br>本文将讲解区块链1.0技术是如何实现的。</p>\n<h2 id=\"哈希函数\"><a href=\"#哈希函数\" class=\"headerlink\" title=\"哈希函数\"></a>哈希函数</h2><p>在讲区块链记账之前，先说明一下哈希函数。<br>哈希函数：Hash(原始信息) &#x3D; 摘要信息<br>原始信息可以是任意的信息, hash之后会得到一个简短的摘要信息</p>\n<p>哈希函数有几个特点:</p>\n<ul>\n<li>同样的原始信息用同一个哈希函数总能得到相同的摘要信息</li>\n<li>原始信息任何微小的变化都会哈希出面目全非的摘要信息</li>\n<li>从摘要信息无法逆向推算出原始信息</li>\n</ul>\n<p>举例说明：<br>Hash(张三借给李四100万，利息1%，1年后还本息 …..) &#x3D; AC4635D34DEF<br>账本上记录了AC4635D34DEF这样一条记录。</p>\n<p>可以看出哈希函数有4个作用：</p>\n<ul>\n<li>简化信息<br>很好理解，哈希后的信息变短了。</li>\n<li>标识信息<br>可以使用AC4635D34DEF来标识原始信息，摘要信息也称为原始信息的id。</li>\n<li>隐匿信息<br>账本是AC4635D34DEF这样一条记录，原始信息被隐匿。</li>\n<li>验证信息<br>假如李四在还款时欺骗说，张三只借给李四10万，双方可以用AC4635D34DEF来验证原始信息</li>\n</ul>\n<p>哈希函数的这4个作用在区块链技术里有广泛的运用。<br>（哈希函数是一组函数或算法，以后会发文章专门介绍哈希）</p>\n<h2 id=\"区块链记账方法\"><a href=\"#区块链记账方法\" class=\"headerlink\" title=\"区块链记账方法\"></a>区块链记账方法</h2><p>假设有一个账页序号为0的账页交易记录如下:</p>\n<table>\n<thead>\n<tr>\n<th>账号</th>\n<th>入账</th>\n<th>出账</th>\n<th>余额</th>\n<th>备注说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>王二</td>\n<td>100</td>\n<td></td>\n<td>190</td>\n<td>收到xxx货款</td>\n</tr>\n<tr>\n<td>张三</td>\n<td></td>\n<td>100</td>\n<td>30</td>\n<td>xxxx</td>\n</tr>\n<tr>\n<td>李四</td>\n<td>120</td>\n<td>90</td>\n<td>170</td>\n<td>xxxx</td>\n</tr>\n</tbody></table>\n<p>记账时间为：2017-10-22 10:22:02</p>\n<p>区块链在记账是会把账页信息（包含序号、记账时间、交易记录）作为原始信息进行Hash, 得到一个Hash值，如：787635ACD, 用函数表示为：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Hash(序号0、记账时间、交易记录) = 787635ACD</span><br></pre></td></tr></table></figure>\n\n<p>账页信息和Hash值组合在一起就构成了第一个区块。</p>\n<blockquote>\n<p>比特币系统里约10分钟记一次账，即每个区块生成时间大概间隔10分钟</p>\n</blockquote>\n<p>在记第2个账页的时候，会把上一个块的Hash值和当前的账页信息一起作为原始信息进行Hash,即：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Hash(上一个Hash值、序号1、记账时间、交易记录) = 456635BCD</span><br></pre></td></tr></table></figure>\n\n<p>这样第2个区块不仅包含了本账页信息，还间接的包含了第一个区块的信息。依次按照此方法继续记账，则最新的区块总是间接包含了所有之前的账页信息。</p>\n<p>所有这些区块组合起来就形成了区块链，这样的区块链就构成了一个便于验证（只要验证最后一个区块的Hash值就相当于验证了整个账本），不可更改（任何一个交易信息的更改，会让所有之后的区块的Hash值发生变化，这样在验证时就无法通过）的总账本。</p>\n<p>记账有成本，想了解节点为什么要记账，请看这篇：<a href=\"\">在比特币如何挖矿-工作量证明</a></p>\n","categories":[{"name":"学习记录","path":"api/categories/学习记录.json"},{"name":"区块链","path":"api/categories/区块链.json"}],"tags":[{"name":"区块链","path":"api/tags/区块链.json"},{"name":"区块链技术","path":"api/tags/区块链技术.json"},{"name":"比特币","path":"api/tags/比特币.json"}]}